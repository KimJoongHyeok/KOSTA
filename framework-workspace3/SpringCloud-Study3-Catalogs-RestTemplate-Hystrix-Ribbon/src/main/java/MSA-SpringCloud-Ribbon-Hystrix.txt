MSA 를 위한 Spring Cloud 컴포넌트 활용 

- Client Load Balancer – Ribbon
Ribbon 은 Client 에 탑재할 수 있는 소프트웨어 기반의 Load Balancer 이다.
MSA에서는 소프트웨어적으로 구현된 클라이어트사이드 로드밸런싱으로 사용한다. 
Ribbon 은 분산 처리 방법으로 라운드 로빈 방식(여러 서버를 순차적으로 돌아가며 요청)으로 부하 분산 기능을 제공한다

환경설정 

maven pom.xml 
<dependency>
 <groupId>org.springframework.cloud</groupId>
 <artifactId>spring-cloud-starter-netflix-ribbon</artifactId>
 <version>2.2.5.RELEASE</version>
</dependency>

// 스프링 클라우드 설정 예 
@EnableCircuitBreaker // 분산환경을 위한 서비스 장애 내성 및 지연 내성을 위한 설정 ( Spring Cloud(Netflix OSS)의 Hystrix를 이용)
@SpringBootApplication
public class SpringCloudCatalogsHystrixRibbonApplication {	
	@Bean
	@LoadBalanced // 부하 분산을 위한 로드 밸런싱을 위한 설정 
	 public RestTemplate restTemplate() {
	 return new RestTemplate();
	 }
	public static void main(String[] args) {
		SpringApplication.run(SpringCloudCatalogsHystrixRibbonApplication.class, args);
	}
}



- Circuit Breaker – Hystrix
Hystrix 는 분산환경을 위한 서비스 장애 내성 및 지연 내성(Latency and Fault Tolerance)을
갖도록 도와주는 라이브러리로써, Circuit Breaker Pattern 디자인을 적용하여 MSA
애플리케이션의 장애 전파를 방지할 수 있다. Hystrix 와 같은 Circuit Breaker 서비스는
기존의 모놀리틱 아키텍처에서는 고려하지 않았던 모듈간 또는 메서드간의 호출 실패가
MSA 에서는 발생할 수 있다. 또한, MSA 에서는 각각의 서비스들이 독립적이지만, 장애가
전파될 수 있는 성질이 있어 이를 미연에 방지하기 위한 Circuit Breaker 가 필수적이다.

환경설정 

maven pom.xml 
<parent>
		<groupId>org.springframework.boot</groupId>
		<artifactId>spring-boot-starter-parent</artifactId>
		<version>2.2.6.RELEASE</version>
		<relativePath />
</parent>

spring boot 2.2.6 환경에서 spring cloud 라이브러리 추가 

<dependency>
			<groupId>org.springframework.cloud</groupId>
			<artifactId>spring-cloud-starter-netflix-hystrix</artifactId>
			<version>2.2.5.RELEASE</version>
</dependency>

